Version 4
SHEET 1 3348 684
WIRE -544 -464 -544 -496
WIRE -416 -464 -544 -464
WIRE -128 -448 -304 -448
WIRE -544 -384 -544 -464
WIRE -224 -368 -224 -384
WIRE -304 -352 -304 -448
WIRE -256 -352 -304 -352
WIRE -128 -336 -128 -448
WIRE -128 -336 -192 -336
WIRE -16 -336 -128 -336
WIRE 0 -336 -16 -336
WIRE -416 -320 -416 -384
WIRE -256 -320 -416 -320
WIRE -416 -288 -416 -320
WIRE -224 -272 -224 -304
WIRE -544 -192 -544 -304
WIRE -416 -192 -416 -208
WIRE -416 -192 -544 -192
WIRE -544 -160 -544 -192
WIRE -448 -16 -480 -16
WIRE -288 -16 -368 -16
WIRE -400 96 -400 80
WIRE 1696 96 1664 96
WIRE 1856 96 1776 96
WIRE -480 112 -480 -16
WIRE -480 112 -560 112
WIRE -432 112 -480 112
WIRE 592 112 560 112
WIRE 736 112 672 112
WIRE 784 112 736 112
WIRE 928 112 864 112
WIRE 992 112 928 112
WIRE 1136 112 1072 112
WIRE 3072 112 2960 112
WIRE 3152 112 3072 112
WIRE 3312 112 3232 112
WIRE -288 128 -288 -16
WIRE -288 128 -368 128
WIRE -432 144 -832 144
WIRE 2960 144 2960 112
WIRE 2144 160 2112 160
WIRE 2192 160 2144 160
WIRE 2320 160 2272 160
WIRE 2336 160 2320 160
WIRE 2480 160 2416 160
WIRE -288 176 -288 128
WIRE -160 176 -288 176
WIRE 0 176 -80 176
WIRE 96 176 0 176
WIRE 208 176 176 176
WIRE 736 176 736 112
WIRE 1472 176 1456 176
WIRE 1520 176 1472 176
WIRE 1664 176 1664 96
WIRE 1664 176 1600 176
WIRE 1712 176 1664 176
WIRE 1856 176 1856 96
WIRE 1856 176 1776 176
WIRE -400 192 -400 160
WIRE -560 224 -560 112
WIRE 48 224 48 192
WIRE -832 240 -832 144
WIRE 48 240 48 224
WIRE 0 256 0 176
WIRE 16 256 0 256
WIRE 640 256 640 240
WIRE 2960 256 2960 224
WIRE 208 272 208 176
WIRE 208 272 80 272
WIRE 432 272 208 272
WIRE 560 272 560 112
WIRE 560 272 512 272
WIRE 608 272 560 272
WIRE 1008 272 1008 256
WIRE 16 288 0 288
WIRE 736 288 736 240
WIRE 736 288 672 288
WIRE 928 288 928 112
WIRE 976 288 928 288
WIRE 1728 288 1728 272
WIRE 3200 288 3200 272
WIRE 608 304 592 304
WIRE 1136 304 1136 112
WIRE 1136 304 1040 304
WIRE 1664 304 1664 176
WIRE 1696 304 1664 304
WIRE 2384 304 2384 256
WIRE 3072 304 3072 112
WIRE 3168 304 3072 304
WIRE 736 320 736 288
WIRE 976 320 928 320
WIRE 1856 320 1856 176
WIRE 1856 320 1760 320
WIRE 2176 320 1856 320
WIRE 2288 320 2256 320
WIRE 2320 320 2320 160
WIRE 2352 320 2320 320
WIRE 3312 320 3312 112
WIRE 3312 320 3232 320
WIRE -448 336 -480 336
WIRE -288 336 -368 336
WIRE 592 336 592 304
WIRE 1136 336 1136 304
WIRE 1536 336 1136 336
WIRE 1648 336 1616 336
WIRE 1696 336 1648 336
WIRE 2480 336 2480 160
WIRE 2480 336 2416 336
WIRE 3168 336 2480 336
WIRE 48 352 48 304
WIRE 592 352 592 336
WIRE 640 352 640 320
WIRE 2288 352 2288 320
WIRE 2352 352 2288 352
WIRE 1008 368 1008 336
WIRE 1648 384 1648 336
WIRE 1728 384 1728 352
WIRE 3200 384 3200 352
WIRE 2384 400 2384 368
WIRE -288 416 -288 336
WIRE -160 416 -288 416
WIRE 0 416 0 288
WIRE 0 416 -80 416
WIRE 96 416 0 416
WIRE 240 416 176 416
WIRE 560 432 560 272
WIRE 608 432 560 432
WIRE 736 432 736 384
WIRE 736 432 688 432
WIRE 928 432 928 320
WIRE 928 432 736 432
WIRE 2288 432 2288 352
WIRE -400 448 -400 432
WIRE -560 464 -560 304
WIRE -480 464 -480 336
WIRE -480 464 -560 464
WIRE -432 464 -480 464
WIRE -288 480 -288 416
WIRE -288 480 -368 480
WIRE -832 496 -832 320
WIRE -432 496 -832 496
WIRE 1648 496 1648 448
WIRE -400 544 -400 512
WIRE 2288 560 2288 512
FLAG 48 352 0
FLAG -544 -160 0
FLAG -544 -496 Vin
FLAG -16 -336 Vref
FLAG 48 224 Vin
FLAG 240 416 Vref
FLAG -400 544 0
FLAG -400 192 0
FLAG -400 80 Vin
FLAG -400 432 Vin
FLAG 640 352 0
FLAG 640 240 Vin
FLAG 1008 368 0
FLAG 1008 256 Vin
FLAG 592 336 Vref
FLAG 1728 384 0
FLAG 1728 272 Vin
FLAG 1648 496 0
FLAG 3200 384 0
FLAG 3200 272 Vin
FLAG 2960 256 0
FLAG 2384 400 0
FLAG 2384 256 Vin
FLAG 2144 160 Vref
FLAG 2288 560 0
FLAG 1472 176 Vref
FLAG -224 -272 0
FLAG -224 -384 Vin
SYMBOL OpAmps\\UniversalOpAmp1 48 272 R0
SYMATTR InstName U1
SYMBOL res 192 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -64 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -64 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 192 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL voltage -544 -400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName vin
SYMATTR Value 3.3
SYMBOL voltage -832 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1M
SYMATTR InstName V1
SYMATTR Value PWL file=C:\Users\LeeFE\Downloads\1_raw_data_13-12_22.03.16.txt\emg.txt
SYMBOL OpAmps\\UniversalOpAmp1 -400 128 R0
SYMATTR InstName U2
SYMBOL OpAmps\\UniversalOpAmp1 -400 480 R0
SYMATTR InstName U3
SYMBOL res -352 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 22k
SYMBOL res -464 352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 22k
SYMBOL res -576 208 R0
SYMATTR InstName R6
SYMATTR Value 220
SYMBOL OpAmps\\UniversalOpAmp1 640 288 R0
SYMATTR InstName U4
SYMBOL OpAmps\\UniversalOpAmp1 1008 304 R0
SYMATTR InstName U5
SYMBOL res 528 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 688 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 880 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 1088 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 704 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL schottky 720 176 R0
SYMATTR InstName D1
SYMBOL schottky 720 320 R0
SYMATTR InstName D2
SYMBOL OpAmps\\UniversalOpAmp1 1728 320 R0
SYMATTR InstName U6
SYMBOL res 1616 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 1792 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL cap 1776 160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 5µ
SYMBOL res 1632 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 100k
SYMBOL cap 1664 448 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 5µ
SYMBOL OpAmps\\UniversalOpAmp1 3200 320 R0
SYMATTR InstName U7
SYMBOL res 3248 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 100k
SYMBOL res 2944 128 R0
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp1 2384 336 R0
SYMATTR InstName U8
SYMBOL res 2272 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL res 2432 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 10k
SYMBOL res 2304 528 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL res 2176 176 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp1 -224 -336 R0
SYMATTR InstName U9
SYMBOL res -432 -480 R0
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL res -432 -304 R0
SYMATTR InstName R23
SYMATTR Value 10k
TEXT -832 -56 Left 2 !.tran 0 40 5 0.002
TEXT -144 80 Left 2 ;Inverting difference amplifier with offset.\nBased off INA118 IC
TEXT 48 488 Left 2 ;Trim offset with a Pot and opamp for ref
TEXT 616 0 Left 2 ;Precision Rectifier
TEXT 1576 -24 Left 2 ;Low Pass filter with optional gain
TEXT 336 -360 Left 2 ;https://www.youtube.com/watch?v=TMr25ouvpD4\nhttps://www.ti.com/lit/an/sboa294/sboa294.pdf?ts=1729244403221&ref_url=https%253A%252F%252Fwww.google.com%252F
TEXT 2144 -24 Left 2 ;Difference Subtractor to remove DC offset
TEXT 2856 -32 Left 2 ;Variable Gain circuit for output
